#
# Generated by Ansible role: vmg (VM Manifest Generator)
# DO NOT EDIT
#

vm_recreate: {{ vmg_vm_recreate }}

cloud_storage_path: /var/lib/libvirt/images/{{ vmg_vm_storage_pool_name }}
cloud_network: {{ vmg_nw_name }}


{% set cnt = namespace(value=vmg_vm_first_ip_octet) -%}
cloud_vms_info:
{% for vm_data in vmg_vms_infra | dict2items -%}
{% for ctr in range(vm_data.value.count) -%}
{% if vm_data.value.count == 1 %}
  '{{ vm_data.key }}':
{% else %}
  '{{ vm_data.key }}{% if vm_data.value.alphabet == False %}{{ ctr+1}}{% else %}{{vmg_alphabets[ctr]}}{% endif %}':
{% endif %}
    vm_image_link: {{ vmg_vm_image_link }}
{% if vm_data.value.count == 1 %}
    vm_local_hostname: {{ vm_data.value.hostname_spec }}
{%- else %}
    vm_local_hostname: {{ vm_data.value.hostname_spec }}{% if vm_data.value.alphabet == False %}{{ ctr+1}}{% else %}{{vmg_alphabets[ctr]}}{% endif %}
{%- endif %}
{% if vm_data.value.count == 1 %} 
    vm_fqdn: {{ vm_data.value.hostname_spec }}.{{ vmg_vm_domain }}
{% else +%}
    vm_fqdn: {{ vm_data.value.hostname_spec }}{% if vm_data.value.alphabet == False %}{{ ctr+1}}{% else %}{{vmg_alphabets[ctr]}}{% endif %}.{{ vmg_vm_domain }}
{% endif %}
    vm_root_passwd: {{ vmg_vm_root_passwd }}
{% if vmg_vm_custom_cloud_user is defined %}
    vm_custom_cloud_user: {{ vmg_vm_custom_cloud_user }}
{% endif %}
{% if vmg_vm_ssh_authorized_keys is defined %}
    vm_ssh_authorized_keys: {{ vmg_vm_ssh_authorized_keys }}
{% endif %}
    vm_os_type: linux
    vm_os_variant: {{ vmg_vm_os_variant }}
    vm_memory: {{ vm_data.value.memory }}
    vm_cpu: {{ vm_data.value.cpus }}
    vm_root_disk_size: {{ vm_data.value.root_disk_size }}
    vm_static_ip: {{ vmg_vm_network.split('.')[0:3] | join('.') }}.{{ cnt.value }}
    vm_netmask: {{ vmg_vm_netmask }}
    vm_gateway: {{ vmg_nw_gateway }}
    vm_dns_search_domain: '{{ vmg_vm_domain }}'
    vm_dns1: {{ vmg_nw_gateway }}
    vm_nm_controlled_network: {{ vmg_vm_nm_controlled_network }} 
{% if vm_data.value.additional_disks is defined %}
    vm_additional_disks: {{ vm_data.value.additional_disks }}
{% endif %}
{% if vm_data.value.additional_nics is defined %}
    vm_additional_nics: {{ vm_data.value.additional_nics }}
{% endif %}
{% set cnt.value = cnt.value + 1 %}
{% endfor %}
{% endfor %}
